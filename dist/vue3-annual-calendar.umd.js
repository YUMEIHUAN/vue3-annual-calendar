(function(d,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],r):(d=typeof globalThis<"u"?globalThis:d||self,r(d.Vue3AnnualCalendar={},d.Vue,d.ElementPlus))})(this,function(d,r,h){"use strict";const F="",m=(u,p)=>{const v=u.__vccOpts||u;for(const[a,l]of p)v[a]=l;return v},x={name:"AnnualCalendar",components:{ElCheckbox:h.ElCheckbox,ElCheckboxGroup:h.ElCheckboxGroup},props:{year:{type:Number,default:()=>new Date().getFullYear()},initialHolidays:{type:Array,default:()=>[]},showBatchSelector:{type:Boolean,default:!0},customStyles:{type:Object,default:()=>({})}},emits:["holiday-change","update:year"],setup(u,{emit:p}){new Date().getFullYear();const a=r.ref(u.year),l=r.ref([...u.initialHolidays]),f=r.ref([]),w=["日","一","二","三","四","五","六"],k=[1,2,3,4,5,6,7,8,9,10,11,12];r.watch(()=>u.year,e=>{a.value=e}),r.watch(l,e=>{p("holiday-change",e)},{deep:!0});const Y=r.computed(()=>f.value.length===0?"无":f.value.sort((e,t)=>e-t).map(e=>w[e]).join("、")),b=e=>{const t=[],n=new Date(a.value,e-1,1),c=new Date(a.value,e,0),D=n.getDay(),o=new Date(a.value,e-1,0).getDate();for(let s=D-1;s>=0;s--){const g=new Date(a.value,e-2,o-s);t.push({day:o-s,date:g,isCurrentMonth:!1})}for(let s=1;s<=c.getDate();s++){const g=new Date(a.value,e-1,s);t.push({day:s,date:g,isCurrentMonth:!0})}const C=42-t.length;for(let s=1;s<=C;s++){const g=new Date(a.value,e,s);t.push({day:s,date:g,isCurrentMonth:!1})}return t},A=e=>{const t=i(e);return l.value.some(n=>n.date===t)},E=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},H=e=>{if(!e.isCurrentMonth)return;const t=i(e.date),n=l.value.findIndex(c=>c.date===t);n===-1?l.value.push({date:t,name:`${a.value}年${e.date.getMonth()+1}月${e.date.getDate()}日`}):l.value.splice(n,1)},i=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${c}`},$=()=>{const e=a.value,t=[...f.value];if(l.value=l.value.filter(n=>{if(parseInt(n.date.split("-")[0])!==e)return!0;const o=new Date(n.date).getDay();return!!(t.includes(o)||[`${e}-01-01`,`${e}-05-01`,`${e}-10-01`].includes(n.date))}),t.length>0){const n=new Date(e,0,1),c=new Date(e,11,31);let D=0;const o=new Date(n);for(;o<=c;){if(t.includes(o.getDay())){const y=i(o);l.value.some(s=>s.date===y)||(l.value.push({date:y,name:`${e}年${o.getMonth()+1}月${o.getDate()}日`}),D++)}o.setDate(o.getDate()+1)}D>0&&h.ElMessage.success(`已更新休息日设置，当前共 ${l.value.filter(y=>parseInt(y.date.split("-")[0])===e).length} 个休息日`)}else h.ElMessage.info("已清除所有批量选择的休息日，保留手动设置的节假日")},W=()=>{f.value=[],$()};return r.onMounted(()=>{if(u.initialHolidays.length===0){const e=new Date(a.value,0,1),t=new Date(a.value,4,1),n=new Date(a.value,9,1);l.value=[{date:i(e),name:`${a.value}年元旦`},{date:i(t),name:`${a.value}年劳动节`},{date:i(n),name:`${a.value}年国庆节`}]}}),{selectedYear:a,weekdays:w,months:k,selectedHolidays:l,selectedWeekdays:f,getSelectedWeekdaysText:Y,getMonthDays:b,toggleHoliday:H,isSelected:A,isToday:E,formatDate:i,handleWeekdayChange:$,clearWeekdaySelection:W}}};function M(u,p,v,a,l,f){return null}const _=m(x,[["render",M],["__scopeId","data-v-f9e0d01d"]]),S={install(u){u.component("AnnualCalendar",_)}};d.AnnualCalendar=_,d.default=S,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
