(function(f,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):(f=typeof globalThis<"u"?globalThis:f||self,e(f.Vue3AnnualCalendar={},f.Vue,f.ElementPlus))})(this,function(f,e,_){"use strict";const R="",M=(y,l)=>{const x=y.__vccOpts||y;for(const[a,d]of l)x[a]=d;return x},B={name:"AnnualCalendar",components:{ElCheckbox:_.ElCheckbox,ElCheckboxGroup:_.ElCheckboxGroup},props:{year:{type:Number,default:()=>new Date().getFullYear()},initialHolidays:{type:Array,default:()=>[]},showBatchSelector:{type:Boolean,default:!0}},emits:["holiday-change","update:year"],setup(y,{emit:l}){new Date().getFullYear();const a=e.ref(y.year),d=e.ref([...y.initialHolidays]),h=e.ref([]),r=e.ref(new Set),C=["日","一","二","三","四","五","六"],D=[1,2,3,4,5,6,7,8,9,10,11,12];e.watch(()=>y.year,t=>{a.value=t,h.value.length>0&&w()}),e.watch(d,t=>{l("holiday-change",t)},{deep:!0});const i=e.computed(()=>h.value.length===0?"无":h.value.sort((t,n)=>t-n).map(t=>C[t]).join("、")),V=t=>{const n=[],o=new Date(a.value,t-1,1),u=new Date(a.value,t,0),p=o.getDay(),c=new Date(a.value,t-1,0).getDate();for(let s=p-1;s>=0;s--){const k=new Date(a.value,t-2,c-s);n.push({day:c-s,date:k,isCurrentMonth:!1})}for(let s=1;s<=u.getDate();s++){const k=new Date(a.value,t-1,s);n.push({day:s,date:k,isCurrentMonth:!0})}const b=42-n.length;for(let s=1;s<=b;s++){const k=new Date(a.value,t,s);n.push({day:s,date:k,isCurrentMonth:!1})}return n},S=t=>{const n=m(t);return d.value.some(o=>o.date===n)},z=t=>{const n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},J=t=>{if(!t.isCurrentMonth)return;const n=m(t.date),o=d.value.findIndex(u=>u.date===n);o===-1?(d.value.push({date:n,name:`${a.value}年${t.date.getMonth()+1}月${t.date.getDate()}日`}),r.value.delete(n)):(d.value.splice(o,1),r.value.delete(n))},m=t=>{const n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0");return`${n}-${o}-${u}`},w=()=>{const t=a.value,n=[...h.value];if(d.value=d.value.filter(o=>{if(parseInt(o.date.split("-")[0])!==t||N(o.date,t)||!r.value.has(o.date))return!0;const c=new Date(o.date).getDay();return n.includes(c)}),r.value.clear(),n.length>0){const o=new Date(t,0,1),u=new Date(t,11,31);let p=0;const c=new Date(o);for(;c<=u;){if(n.includes(c.getDay())){const g=m(c);if(N(g,t)){c.setDate(c.getDate()+1);continue}d.value.some(s=>s.date===g)?N(g,t)||r.value.add(g):(d.value.push({date:g,name:`${t}年${c.getMonth()+1}月${c.getDate()}日`}),r.value.add(g),p++)}c.setDate(c.getDate()+1)}p>0&&_.ElMessage.success(`已更新休息日设置，当前共 ${d.value.filter(g=>parseInt(g.date.split("-")[0])===t).length} 个休息日`)}else _.ElMessage.info("已清除所有批量选择的休息日，保留手动设置的节假日")},N=(t,n)=>[`${n}-01-01`,`${n}-05-01`,`${n}-10-01`].includes(t),K=()=>{w()},Q=()=>{h.value=[],w()};return e.onMounted(()=>{if(y.initialHolidays.length===0){const t=new Date(a.value,0,1),n=new Date(a.value,4,1),o=new Date(a.value,9,1);d.value=[{date:m(t),name:`${a.value}年元旦`},{date:m(n),name:`${a.value}年劳动节`},{date:m(o),name:`${a.value}年国庆节`}]}}),{selectedYear:a,weekdays:C,months:D,selectedHolidays:d,selectedWeekdays:h,getSelectedWeekdaysText:i,getMonthDays:V,toggleHoliday:J,isSelected:S,isToday:z,formatDate:m,handleWeekdayChange:K,clearWeekdaySelection:Q}}},T={id:"app"},W={class:"calendar-container"},Y={class:"batch-selector"},F={class:"weekday-checkboxes"},H={class:"selected-info"},$={class:"calendar-grid"},A={class:"month-header"},I={class:"calendar"},L={class:"weekdays"},j={class:"days"},O=["onClick"],q={key:0,class:"selected-indicator"};function G(y,l,x,a,d,h){const r=e.resolveComponent("el-checkbox"),C=e.resolveComponent("el-checkbox-group");return e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",W,[e.createElementVNode("div",Y,[l[8]||(l[8]=e.createElementVNode("h3",null,"批量选择休息日",-1)),e.createElementVNode("div",F,[e.createVNode(C,{modelValue:a.selectedWeekdays,"onUpdate:modelValue":l[0]||(l[0]=D=>a.selectedWeekdays=D),onChange:a.handleWeekdayChange},{default:e.withCtx(()=>[e.createVNode(r,{label:1},{default:e.withCtx(()=>[...l[1]||(l[1]=[e.createTextVNode("周一休息",-1)])]),_:1}),e.createVNode(r,{label:2},{default:e.withCtx(()=>[...l[2]||(l[2]=[e.createTextVNode("周二休息",-1)])]),_:1}),e.createVNode(r,{label:3},{default:e.withCtx(()=>[...l[3]||(l[3]=[e.createTextVNode("周三休息",-1)])]),_:1}),e.createVNode(r,{label:4},{default:e.withCtx(()=>[...l[4]||(l[4]=[e.createTextVNode("周四休息",-1)])]),_:1}),e.createVNode(r,{label:5},{default:e.withCtx(()=>[...l[5]||(l[5]=[e.createTextVNode("周五休息",-1)])]),_:1}),e.createVNode(r,{label:6},{default:e.withCtx(()=>[...l[6]||(l[6]=[e.createTextVNode("周六休息",-1)])]),_:1}),e.createVNode(r,{label:0},{default:e.withCtx(()=>[...l[7]||(l[7]=[e.createTextVNode("周日休息",-1)])]),_:1})]),_:1},8,["modelValue","onChange"]),e.createElementVNode("div",H,"已选择: "+e.toDisplayString(a.getSelectedWeekdaysText),1)])]),e.createElementVNode("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.months,D=>(e.openBlock(),e.createElementBlock("div",{key:D,class:"month-card"},[e.createElementVNode("div",A,e.toDisplayString(a.selectedYear)+"年"+e.toDisplayString(D)+"月",1),e.createElementVNode("div",I,[e.createElementVNode("div",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.weekdays,i=>(e.openBlock(),e.createElementBlock("div",{key:i},e.toDisplayString(i),1))),128))]),e.createElementVNode("div",j,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.getMonthDays(D),(i,V)=>(e.openBlock(),e.createElementBlock("div",{key:V,class:e.normalizeClass(["day",{"other-month":!i.isCurrentMonth,selected:a.isSelected(i.date),today:a.isToday(i.date)}]),onClick:S=>a.toggleHoliday(i)},[e.createTextVNode(e.toDisplayString(i.isCurrentMonth?i.day:"")+" ",1),a.isSelected(i.date)?(e.openBlock(),e.createElementBlock("div",q,"休")):e.createCommentVNode("",!0)],10,O))),128))])])]))),128))]),l[9]||(l[9]=e.createElementVNode("div",{class:"footer"},[e.createElementVNode("p",null,"Element UI + Vue3 年度节假日日历 - 点击日期可标记为节假日，支持批量选择")],-1))])])}const E=M(B,[["render",G],["__scopeId","data-v-e28d46dc"]]),U={install(y){y.component("AnnualCalendar",E)}};f.AnnualCalendar=E,f.default=U,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
